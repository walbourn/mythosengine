#
#
#                                /\    /\
#                               /  \  /  \
#                              /    \/    \
#                             /  /\    /\  \
#                            /  /  \  /  Y T H O S
#                           /  /    \/    \  \
#                          /  /            \  \
#                         /__/              \__\
#
#                      Microsoft Windows '95 Version
#
#            Copyright (c) 1994-1997 by Charybdis Enterprises, Inc.
#                           All Rights Reserved.
#
#
#
#           *** Charybdis Enterprises, Inc. Company Confidential ***
#
#  This file and all associated files are the company proprietary property
#        of Charybdis Enterprises, Inc.  Unauthorized use prohibited.
#
# CHARYBDIS ENTERPRISES, INC. MAKES NO WARRANTIES, EXPRESS OR IMPLIED, AS
# TO THE CORRECTNESS OF THIS CODE OR ANY DERIVATIVE WORKS WHICH INCORPORATE
# IT.  CHARYBDIS ENTERPRISES, INC. PROVIDES THE CODE ON AN "AS-IS" BASIS
# AND EXPLICITLY DISCLAIMS ANY LIABILITY, INCLUDING CONSEQUENTIAL AND
# INCIDENTAL DAMAGES FOR ERRORS, OMISSIONS, AND OTHER PROBLEMS IN THE CODE.
#
#
#
#                              3D VIEWER EXAMPLE
#
# Created by Chuck Walbourn
#
# makefile
#
#

#
#
#                               Variables
#                                
#

!if "$(DEBUG)" == ""
DEBUG = NO
!endif

!if "$(THREAD)" == ""
THREAD = YES
!endif

!if "$(MYTH95ROOT)" == ""
MYTH95ROOT = \MythOS95
!endif

INCPATH = ;..\;$(MYTH95ROOT)\inc;

#Ŀ
# File specific variables                                                  
#

LIBPATH = $(MYTH95ROOT)\lib;

EXE = script

OBJS = \
lexyy.obj\
main.obj\
script.obj\
scamera.obj\
slight.obj\
sdraw.obj\
resource.res

LIBS = \
ivory.lib\
xfile.lib\
felix.lib\
chronos.lib\
max.lib\
vangogh.lib\
escher.lib\
gutenbrg.lib\
bozo.lib\
newton.lib\
mythos.lib\
dxguid.lib\
dinput.lib\
ddraw.lib\
gdi32.lib\
winmm.lib\
user32.lib

#Ŀ
# First target                                                             
#

all: setstden $(EXE).pch $(EXE).exe

#Ŀ
# Standard make include                                                    
#

!include $(MYTH95ROOT)\inc\make.inc

#
#
#                                 Rules
#
#

#--- .c, .cpp, .asm setup in standard include ---

{..\}.cpp{}.obj:
	$(CPP) $(CCOPTIONS) /Yumythos.hpp /Fp$(EXE).pch  $<

#
#
#                              Dependancies
#
#

$(EXE).pch :
    del main.obj

main.obj : ..\main.cpp
    $(CPP) /Ycmythos.hpp /Fp$(EXE).pch $(CCOPTIONS) ..\$*.cpp

#
# Event system Files
#

..\screvt.iff : ..\screvt.hpp

..\screvt.hpp:  ..\screvt.cel
    $(MYTH95ROOT)\bin\maxc ..\screvt.cel

#
# C++ files
#

script.obj : ..\script.cpp\
             ..\screvt.hpp\
             ..\scrtok.h\
             ..\scrapp.hpp

scamera.obj : ..\scamera.cpp\
              ..\scrtok.h

slight.obj : ..\slight.cpp\
             ..\scrtok.h

sdraw.obj : ..\sdraw.cpp\
            ..\scrapp.hpp

#Ŀ
# Executable                                                               
#

$(EXE).exe:   $(OBJS)
    $(LINK) $(LINKOPTS) /OUT:$*.exe @<<
    $(OBJS) $(LIBS)
<<

lexyy.obj : .\lexyy.c
	$(CC) $(CCOPTIONS) /W2 lexyy.c

.\lexyy.c : ..\script.l
   flex -8 ../script.l

clean:
    del *.obj
    del *.res
    del *.err
    del *.lst
    del *.ilk
    del *.pdb
    del *.vcp
    del *.pch
    del ..\screvt.hpp
    del ..\screvt.iff

# End of makefile 

